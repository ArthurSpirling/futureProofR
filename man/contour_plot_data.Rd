% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/contour_plots.R
\name{contour_plot_data}
\alias{contour_plot_data}
\title{Generate Contour Plot Data for Misclassification Analysis}
\usage{
contour_plot_data(
  dat,
  m,
  treatment,
  outcome,
  binary,
  ground_truth = NULL,
  confMat = NULL,
  R_obs = NULL,
  rho_M_Y = NULL,
  rho_M_D = NULL,
  nsims = 100,
  R_vect = seq(0.025, 0.5, by = 0.025),
  pi_vect = seq(0.05, 0.95, by = 0.05)
)
}
\arguments{
\item{dat}{A dataframe containing the data.}

\item{m}{A fitted model object (e.g., from `lm`) used to extract variables.}

\item{treatment}{A string specifying the name of the treatment variable in `dat`.}

\item{outcome}{A string specifying the name of the outcome variable in `dat`.}

\item{binary}{A string specifying the name of the observed binary treatment variable
subject to misclassification (could be `treatment` or `outcome`).}

\item{ground_truth}{Optional string specifying the name of the ground truth treatment
variable in `dat`.
If provided, it is used to calculate observed misclassification rates and correlations.}

\item{confMat}{Optional 2x2 confusion matrix for the binary treatment variable.
Used to estimate misclassification rate if `ground_truth` is not provided.}

\item{R_obs}{Optional numeric value specifying the user's best guess of the
misclassification rate if neither `ground_truth` nor `confMat` is provided.}

\item{rho_M_Y}{Optional numeric correlation between misclassification indicator and
outcome variable. Required if `ground_truth` is not provided.}

\item{rho_M_D}{Optional numeric correlation between misclassification indicator and
treatment variable. Required if `ground_truth` is not provided.}

\item{nsims}{Number of simulations to run for estimating lambda values. Default is 100.}

\item{R_vect}{Numeric vector of misclassification rates to evaluate.
Default is `seq(0.025, 0.5, by = 0.025)`.}

\item{pi_vect}{Numeric vector of proportions of treated units to evaluate.
Default is `seq(0.05, 0.95, by = 0.05)`.}
}
\value{
A list with components:
\describe{
  \item{toplot}{A data frame containing the grid of misclassification rates, proportions,
  and simulated lambda values.}
  \item{R_obs}{Observed or user-supplied misclassification rate.}
  \item{pi_obs}{Observed or user-supplied proportion of treated units.}
}
}
\description{
This function generates the data needed to create contour plots that visualize the
impact of misclassification rates and proportions of treated units on the bias of
treatment effect estimates.
}
\details{
The function calculates observed misclassification rates and correlations if ground
truth data is available. Otherwise, it relies on user-supplied values or confusion
matrices. It then simulates data under various misclassification and treatment
proportion scenarios to estimate the bias or coverage of treatment effect estimates.
}
\examples{
\dontrun{
contour_data <- contour_plot_data(dat = mydata,
                                 m = lm(Y ~ D + X1 + X2, data = mydata),
                                 treatment = "D",
                                 outcome = "Y",
                                 binary = "D_obs",
                                 ground_truth = "D_true",
                                 nsims = 50)
}

}
